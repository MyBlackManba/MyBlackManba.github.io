<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>微信小程序制作简单教程 | welcome to here</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="软件工程">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序制作简单教程">
<meta property="og:url" content="http://yoursite.com/2017/10/14/微信小程序制作简单教程/index.html">
<meta property="og:site_name" content="welcome to here">
<meta property="og:description" content="软件工程">
<meta property="og:updated_time" content="2018-01-07T06:41:54.208Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="微信小程序制作简单教程">
<meta name="twitter:description" content="软件工程">
  
    <link rel="alternate" href="/atom.xml" title="welcome to here" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">welcome to here</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-微信小程序制作简单教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/14/微信小程序制作简单教程/" class="article-date">
  <time datetime="2017-10-14T13:22:52.000Z" itemprop="datePublished">2017-10-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      微信小程序制作简单教程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>软件工程<br><a id="more"></a></p>
<p>本文档将带你一步步创建完成一个微信小程序，并可以在手机上体验该小程序的实际效果。这个小程序的首页将会显示欢迎语以及当前用户的微信头像，点击头像，可以在新开的页面中查看当前小程序的启动日志。下载源码</p>
<h2 id="1-获取微信小程序的-AppID"><a href="#1-获取微信小程序的-AppID" class="headerlink" title="1. 获取微信小程序的 AppID"></a>1. 获取微信小程序的 AppID</h2><p>登录 <a href="https://mp.weixin.qq.com" target="_blank" rel="noopener">https://mp.weixin.qq.com</a> ，就可以在网站的“设置”-“开发者设置”中，查看到微信小程序的 AppID 了，注意不可直接使用服务号或订阅号的 AppID 。</p>
<p>注意：如果要以非管理员微信号在手机上体验该小程序，那么我们还需要操作“绑定开发者”。即在“用户身份”-“开发者”模块，绑定上需要体验该小程序的微信号。本教程默认注册帐号、体验都是使用管理员微信号。</p>
<h2 id="2-创建项目"><a href="#2-创建项目" class="headerlink" title="2. 创建项目"></a>2. 创建项目</h2><p>我们需要通过开发者工具，来完成小程序创建和代码编辑。</p>
<p>开发者工具安装完成后，打开并使用微信扫码登录。选择创建“项目”，填入上文获取到的 AppID ，设置一个本地项目的名称（非小程序名称），比如“我的第一个项目”，并选择一个本地的文件夹作为代码存储的目录，点击“新建项目”就可以了。</p>
<p>为方便初学者了解微信小程序的基本代码结构，在创建过程中，如果选择的本地文件夹是个空文件夹，开发者工具会提示，是否需要创建一个 quick start 项目。选择“是”，开发者工具会帮助我们在开发目录里生成一个简单的 demo。</p>
<p>项目创建成功后，我们就可以点击该项目，进入并看到完整的开发者工具界面，点击左侧导航，在“编辑”里可以查看和编辑我们的代码，在“调试”里可以测试代码并模拟小程序在微信客户端效果，在“项目”里可以发送到手机里预览实际效果。</p>
<h2 id="3-编写代码"><a href="#3-编写代码" class="headerlink" title="3. 编写代码"></a>3. 编写代码</h2><p>创建小程序实例</p>
<p>点击开发者工具左侧导航的“编辑”，我们可以看到这个项目，已经初始化并包含了一些简单的代码文件。最关键也是必不可少的，是 app.js、app.json、app.wxss 这三个。其中，.js后缀的是脚本文件，.json后缀的文件是配置文件，.wxss后缀的是样式表文件。微信小程序会读取这些文件，并生成小程序实例。</p>
<p>下面我们简单了解这三个文件的功能，方便修改以及从头开发自己的微信小程序。</p>
<p>app.js是小程序的脚本代码。我们可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量。调用框架提供的丰富的 API，如本例的同步存储及同步读取本地数据。想了解更多可用 API，可参考 API 文档</p>
<p>//app.js<br>App({<br>  onLaunch() {<br>    // 展示本地存储能力<br>    const logs = wx.getStorageSync(‘logs’) || []<br>    logs.unshift(Date.now())<br>    wx.setStorageSync(‘logs’, logs)</p>
<pre><code>// 登录
wx.login({
  success: res =&gt; {
    // 发送 res.code 到后台换取 openId, sessionKey, unionId
  }
})
// 获取用户信息
wx.getSetting({
  success: res =&gt; {
    if (res.authSetting[&apos;scope.userInfo&apos;]) {
      // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框
      wx.getUserInfo({
        success: res =&gt; {
          // 可以将 res 发送给后台解码出 unionId
          this.globalData.userInfo = res.userInfo

        }
      })
    }
  }
})
</code></pre><p>  },<br>  globalData: {<br>    userInfo: null<br>  }<br>})</p>
<p>app.json 是对整个小程序的全局配置。我们可以在这个文件中配置小程序是由哪些页面组成，配置小程序的窗口背景色，配置导航条样式，配置默认标题。注意该文件不可添加任何注释。更多可配置项可参考配置详解</p>
<p>{<br>  “pages”:[<br>    “pages/index/index”,<br>    “pages/logs/logs”<br>  ],<br>  “window”:{<br>    “backgroundTextStyle”:”light”,<br>    “navigationBarBackgroundColor”: “#fff”,<br>    “navigationBarTitleText”: “WeChat”,<br>    “navigationBarTextStyle”:”black”<br>  }<br>}</p>
<p>app.wxss 是整个小程序的公共样式表。我们可以在页面组件的 class 属性上直接使用 app.wxss 中声明的样式规则。</p>
<p>/<strong>app.wxss</strong>/<br>.container {<br>  height: 100%;<br>  display: flex;<br>  flex-direction: column;<br>  align-items: center;<br>  justify-content: space-between;<br>  padding: 200rpx 0;<br>  box-sizing: border-box;<br>}</p>
<p>##创建页面</p>
<p>在这个教程里，我们有两个页面，index 页面和 logs 页面，即欢迎页和小程序启动日志的展示页，他们都在 pages 目录下。微信小程序中的每一个页面的【路径+页面名】都需要写在 app.json 的 pages 中，且 pages 中的第一个页面是小程序的首页。</p>
<p>每一个小程序页面是由同路径下同名的四个不同后缀文件的组成，如：index.js、index.wxml、index.wxss、index.json。.js后缀的文件是脚本文件，.json后缀的文件是配置文件，.wxss后缀的是样式表文件，.wxml后缀的文件是页面结构文件。</p>
<p>index.wxml 是页面的结构文件：</p>
<!--index.wxml-->
<view class="container"><br>  <view class="userinfo"><br>    <block wx:if=""><br>      <image bindtap="bindViewTap" class="userinfo-avatar" src="" background-size="cover"></image><br>      <text class="userinfo-nickname"></text><br>    </block><br>    <button wx:else="" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button><br>  </view><br>  <view class="usermotto"><br>    <text class="user-motto"></text><br>  </view><br></view>

<p>本例中使用了<view>、<image>、<text>来搭建页面结构，绑定数据和交互处理函数。</text></image></view></p>
<p>index.js 是页面的脚本文件，在这个文件中我们可以监听并处理页面的生命周期函数、获取小程序实例，声明并处理数据，响应页面交互事件等。</p>
<p>//index.js<br>//获取应用实例<br>const app = getApp()</p>
<p>Page({<br>  data: {<br>    motto: ‘Hello World’,<br>    userInfo: {},<br>    hasUserInfo: false<br>  },<br>  //事件处理函数<br>  bindViewTap: function() {<br>    wx.navigateTo({<br>      url: ‘../logs/logs’<br>    })<br>  },<br>  onLoad: function () {<br>    if (app.globalData.userInfo) {<br>      this.setData({<br>        userInfo: app.globalData.userInfo,<br>        hasUserInfo: true<br>      })<br>    } else {<br>      // 由于 getUserInfo 是网络请求，可能会在 Page.onLoad 之后才返回<br>      // 所以此处加入 callback 以防止这种情况<br>      app.userInfoReadyCallback = res =&gt; {<br>        this.setData({<br>          userInfo: res.userInfo,<br>          hasUserInfo: true<br>        })<br>      }<br>    }<br>  },<br>  getUserInfo: function(e) {<br>    this.setData({<br>      userInfo: e.detail.userInfo,<br>      hasUserInfo: true<br>    })<br>  }<br>})</p>
<p>index.wxss 是页面的样式表：</p>
<p>/<strong>index.wxss</strong>/<br>.userinfo {<br>  display: flex;<br>  flex-direction: column;<br>  align-items: center;<br>}</p>
<p>.userinfo-avatar {<br>  width: 128rpx;<br>  height: 128rpx;<br>  margin: 20rpx;<br>  border-radius: 50%;<br>}</p>
<p>.userinfo-nickname {<br>  color: #aaa;<br>}</p>
<p>.usermotto {<br>  margin-top: 200px;<br>}</p>
<p>页面的样式表是非必要的。当有页面样式表时，页面的样式表中的样式规则会层叠覆盖 app.wxss 中的样式规则。如果不指定页面的样式表，也可以在页面的结构文件中直接使用 app.wxss 中指定的样式规则。</p>
<p>index.json 是页面的配置文件：</p>
<p>页面的配置文件是非必要的。当有页面的配置文件时，配置项在该页面会覆盖 app.json 的 window 中相同的配置项。如果没有指定的页面配置文件，则在该页面直接使用 app.json 中的默认配置。</p>
<p>logs 的页面结构</p>
<!--logs.wxml-->
<view class="container log-list"><br>  <block wx:for="" wx:for-item="log"><br>    <text class="log-item">NaN. </text><br>  </block><br></view>

<p>logs 页面使用 <block> 控制标签来组织代码，在 <block> 上使用 wx:for 绑定 logs 数据，并将 logs 数据循环展开节点</block></block></p>
<p>//logs.js<br>const util = require(‘../../utils/util.js’)</p>
<p>Page({<br>  data: {<br>    logs: []<br>  },<br>  onLoad: function () {<br>    this.setData({<br>      logs: (wx.getStorageSync(‘logs’) || []).map(log =&gt; {<br>        return util.formatTime(new Date(log))<br>      })<br>    })<br>  }<br>})</p>
<p>运行结果如下：</p>
<ol>
<li>手机预览</li>
</ol>
<p>开发者工具左侧菜单栏选择”项目”，点击”预览”，扫码后即可在微信客户端中体验。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/10/14/微信小程序制作简单教程/" data-id="cjep9mrp4000izco094e6uu3m" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/11/01/ctfwp之杂项/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          ctfwp之杂项
        
      </div>
    </a>
  
  
    <a href="/2017/09/21/unbuntu中tomcat安装过程/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">unbuntu中tomcat安装过程</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/12/csrf学习/">web学习</a>
          </li>
        
          <li>
            <a href="/2018/03/10/sql注入的预防/">sql注入的预防</a>
          </li>
        
          <li>
            <a href="/2018/03/06/渗透测试流程-1/">渗透测试流程</a>
          </li>
        
          <li>
            <a href="/2018/01/19/xss简介/">xss学习</a>
          </li>
        
          <li>
            <a href="/2018/01/08/上传漏洞fckeditor的利用/">上传漏洞fckeditor的利用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 BlackManba<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>